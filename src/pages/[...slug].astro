---
import Layout from '../layouts/Page.astro'
import type { PageFrontmatter } from '../utils/navigation'

export async function getStaticPaths() {
  const allPages = await Promise.all([
    Astro.glob<PageFrontmatter>('/src/content/pages/**/*.mdx'),
    Astro.glob<PageFrontmatter>('/src/content/pages/**/*.md'),
  ]).then(([mdx, md]) => [...mdx, ...md])

  return allPages
    .map((page) => ({
      params: { slug: page.url?.slice(1) },
      props: { page },
    }))
    .filter((page) => !!page.params.slug)
}

const { page } = Astro.props
---

<Layout page={page} />
