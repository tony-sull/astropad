---
import type { MDXInstance } from 'astro'
import NavigationItem from './NavigationItem.astro'
import { findHeadingEntries } from '../utils/navigation.js'
import type { Page } from '../utils/navigation.js'

export interface Props extends astroHTML.JSX.HTMLAttributes {
  page: MDXInstance<Page>
}

const { page, ...attrs } = Astro.props

const entries = findHeadingEntries(page)
---

<nav {...attrs}>
  <p>On this page</p>
  <ol>
    {entries.map((entry) => <NavigationItem {...entry} />)}
  </ol>
</nav>

<style>
  ol {
    list-style: none;
    padding-inline-start: 2ch;
    display: flex;
    flex-direction: column;
  }
</style>
